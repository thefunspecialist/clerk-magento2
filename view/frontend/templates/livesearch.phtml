<?php
/** @var \Clerk\Clerk\Block\LiveSearch $block */
?>
<span
    class="clerk"
    data-template="@<?php echo $block->getLiveSearchTemplate(); ?>"
    data-instant-search-suggestions="<?php echo($block->getSuggestions() ? $block->getSuggestions() : "0"); ?>"
    data-instant-search-categories="<?php echo($block->getCategories() ? $block->getCategories() : "0"); ?>"
    data-instant-search-pages="<?php echo($block->getPages() ? $block->getPages() : "0"); ?>"
    <?php
    if('all' !== $block->getPagesType()):
    ?>
    data-instant-search-pages-type="<?php echo $block->getPagesType(); ?>"
    <?php
    endif;
    ?>
    data-instant-search-positioning="<?php echo $block->getDropdownPosition(); ?>"
    data-instant-search="<?php echo(!empty($block->getInputSelector()) ? $block->getInputSelector() : '#search'); ?>"
></span>
<?php
if (!empty($block->getFormSelector())):
    $search_page_route = $block->getShopBaseDomainUrl() . 'catalogsearch/result';
?>
    <script>
        require(['jquery','jquery/ui','domReady!'],
        function($){
            let elems = document.querySelectorAll('<?php echo $block->getFormSelector(); ?>');
            elems.forEach(form_element => {
                form_element.setAttribute('action', '<?php echo $search_page_route; ?>');
            });
        });
    </script>
    <style type="text/css">
    #search_autocomplete { display: none !important; }
    </style>
<?php
endif;
?>

